[gd_scene load_steps=29 format=3 uid="uid://dbbo5n44yys5g"]

[ext_resource type="Script" uid="uid://bh8pspu4qwq7" path="res://Scripts/Actors/muffin_enemy.gd" id="1_be5vf"]
[ext_resource type="Texture2D" uid="uid://bpwch21bigrcx" path="res://Assets/Spritesheets/muffin.png" id="2_be5vf"]
[ext_resource type="AudioStream" uid="uid://bd1vw4ej5iqe0" path="res://Assets/Audio/SFX/Muffin/Muffin Walk.mp3" id="2_qwhmp"]
[ext_resource type="AudioStream" uid="uid://bmsgga158ete2" path="res://Assets/Audio/SFX/Muffin/Muffin Stomp.mp3" id="3_212ay"]
[ext_resource type="Script" uid="uid://birj0rp18k4pc" path="res://Scripts/Base Classes/hurt_box_2d.gd" id="3_fajeb"]
[ext_resource type="PackedScene" uid="uid://tafaqmmch10v" path="res://Scenes/Particles/hit_particle.tscn" id="4_mrxay"]
[ext_resource type="Script" uid="uid://bjthx5ggn7l20" path="res://Scripts/Base Classes/hit_box_2d.gd" id="6_su36b"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_j2i6s"]
size = Vector2(41, 10.5)

[sub_resource type="AtlasTexture" id="AtlasTexture_rksig"]
atlas = ExtResource("2_be5vf")
region = Rect2(0, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_fajeb"]
atlas = ExtResource("2_be5vf")
region = Rect2(64, 384, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_xtosf"]
atlas = ExtResource("2_be5vf")
region = Rect2(0, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_x727p"]
atlas = ExtResource("2_be5vf")
region = Rect2(64, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_e8ecx"]
atlas = ExtResource("2_be5vf")
region = Rect2(0, 512, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_g57ld"]
atlas = ExtResource("2_be5vf")
region = Rect2(64, 512, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ncxit"]
atlas = ExtResource("2_be5vf")
region = Rect2(0, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_epf8y"]
atlas = ExtResource("2_be5vf")
region = Rect2(64, 448, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_u2dtd"]
atlas = ExtResource("2_be5vf")
region = Rect2(0, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_j5pqj"]
atlas = ExtResource("2_be5vf")
region = Rect2(64, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_l3ukn"]
atlas = ExtResource("2_be5vf")
region = Rect2(0, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_8h2t3"]
atlas = ExtResource("2_be5vf")
region = Rect2(64, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_vd8h5"]
atlas = ExtResource("2_be5vf")
region = Rect2(0, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_gi680"]
atlas = ExtResource("2_be5vf")
region = Rect2(64, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lai06"]
atlas = ExtResource("2_be5vf")
region = Rect2(0, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_fp0if"]
atlas = ExtResource("2_be5vf")
region = Rect2(64, 256, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_83sv0"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rksig")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fajeb")
}],
"loop": true,
"name": &"idle_back",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xtosf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x727p")
}],
"loop": true,
"name": &"idle_front",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_e8ecx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_g57ld")
}],
"loop": true,
"name": &"idle_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ncxit")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_epf8y")
}],
"loop": true,
"name": &"idle_right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_u2dtd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j5pqj")
}],
"loop": true,
"name": &"walking_back",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_l3ukn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8h2t3")
}],
"loop": true,
"name": &"walking_front",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_vd8h5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gi680")
}],
"loop": true,
"name": &"walking_left",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lai06")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fp0if")
}],
"loop": true,
"name": &"walking_right",
"speed": 2.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_5r0i6"]
radius = 29.017237

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_4cph0"]
bg_color = Color(0.16445297, 0.110300265, 0.106920175, 1)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3
expand_margin_left = 1.0
expand_margin_top = 1.0
expand_margin_right = 1.0
expand_margin_bottom = 1.0

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_mrxay"]
bg_color = Color(0.62858737, 0, 0.11053502, 1)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3

[node name="MuffinEnemy" type="CharacterBody2D" node_paths=PackedStringArray("sprite", "camera", "hurt_box", "health_bar", "hit_particle", "hit_box", "audio_player", "attack_audio_player_1")]
script = ExtResource("1_be5vf")
dash_duration = 0.4
patrol_radius = 75.0
sprite = NodePath("AnimatedSprite2D")
camera = NodePath("Camera2D")
movement_speed = 40.0
attack_type = 1
vision_range = 140.0
attack_range = 140.0
hurt_box = NodePath("HurtBox2D")
health_bar = NodePath("Health")
hit_particle = NodePath("HitParticle")
hit_box = NodePath("HitBox2D")
audio_player = NodePath("AudioStreamPlayer2D")
walking_audio = Array[AudioStream]([ExtResource("2_qwhmp")])
attack_audio_player_1 = NodePath("AudioStreamPlayer2D2")
attack_audio_1 = ExtResource("3_212ay")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0.5, 14.25)
shape = SubResource("RectangleShape2D_j2i6s")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(0, -29)
enabled = false
position_smoothing_enabled = true
position_smoothing_speed = 3.0

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(0, 19)
sprite_frames = SubResource("SpriteFrames_83sv0")
animation = &"idle_front"
offset = Vector2(0, -29)

[node name="DetectionArea" type="Area2D" parent="."]
position = Vector2(1, 14)

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionArea"]
shape = SubResource("RectangleShape2D_j2i6s")

[node name="HurtBox2D" type="Area2D" parent="."]
collision_mask = 2
script = ExtResource("3_fajeb")
metadata/_custom_type_script = "uid://birj0rp18k4pc"

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtBox2D"]
position = Vector2(1, -12)
shape = SubResource("CircleShape2D_5r0i6")

[node name="HitBox2D" type="Area2D" parent="."]
script = ExtResource("6_su36b")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HitBox2D"]
position = Vector2(1, -12)
shape = SubResource("CircleShape2D_5r0i6")

[node name="Health" type="ProgressBar" parent="."]
offset_left = -15.0
offset_top = 25.0
offset_right = 15.0
offset_bottom = 31.0
theme_override_styles/background = SubResource("StyleBoxFlat_4cph0")
theme_override_styles/fill = SubResource("StyleBoxFlat_mrxay")
value = 50.0
show_percentage = false

[node name="HitParticle" parent="." instance=ExtResource("4_mrxay")]
modulate = Color(0.29803923, 0.1254902, 0.06666667, 1)

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
volume_db = -10.0
max_distance = 500.0
bus = &"SFX"

[node name="AudioStreamPlayer2D2" type="AudioStreamPlayer2D" parent="."]
volume_db = -10.0
max_distance = 500.0
bus = &"SFX"
